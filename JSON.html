<!DOCTYPE html>
<html lang="zh">
<head>
	<meta charset="UTF-8">
	<title>json</title>
	
	<link rel="stylesheet" href="css/JSON.css">
</head>
<body>
	<script type="text/javascript" src="js/json.js"></script>
	<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

	<div class="wrap">
		<div id="pic"></div>
	</div>

	<script>

		$(document).ready(function() {

			// 清空localStorage
			localStorage.clear();

			// 讀取Json.html資料
			var jsonData = callBackdata();
			for(var i=0; i<jsonData.productAll.length; i++) {
			
				// ` 這是es6 寫法, 包舍整段文字和宣告的內容
				$("#pic").append(
					`<div class="body">
					<img class="pic" src=" ${jsonData.productAll[i].pic} ">
					<h4 class="brand"> ${jsonData.productAll[i].brand} </h4>
					<h6 class="prodcut"> ${jsonData.productAll[i].product} </h6>
					<h6 class="price"> ${jsonData.productAll[i].price} </h6>
					<h6 class="disprice"> ${jsonData.productAll[i].disprice} </h6>
					</div>`);

			}

			// 使用者點選後索引 (點選後的第幾個商品)
			$('.body').click(function() {

				// 清空localStorage
				localStorage.clear();

				var index = $('.body').index(this);
				// console.log(index);
				// console.log(jsonData.productAll[index].brand);
		
				//把點選的索引資訊 存到localStorage  
				//iamProduct是 key, 後面是value
				localStorage.setItem("iamProduct", jsonData.productAll[index].pic);
				localStorage.setItem("iamProduct", jsonData.productAll[index].brand);
				localStorage.setItem("iamProduct", jsonData.productAll[index].product);
				localStorage.setItem("iamProduct", jsonData.productAll[index].price);

				//網頁跳轉
				window.location = "JSON_product.html";

			});
			
		});

	</script>

</body>

</html>